# æŠ½è±¡å·¥å‚æ¨¡å¼ ğŸŒ‰

> æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ã€‚



## æ¦‚å¿µç†è§£ï¼ˆé‡è¦â—â—â—ï¼‰



ã€€ã€€ç‰¹åˆ«å¼ºè°ƒäº†ä¸€ä¸‹æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¦‚å¿µç†è§£éƒ¨åˆ†æˆ‘è§‰å¾—æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå½“ç„¶æˆ‘åœ¨å†™ä¸‹è¿™ç¯‡æ–‡ç« ä¹‹å‰çœ‹è¿‡å¾ˆå¤šä¼˜ç§€çš„åšæ–‡ã€ä¹¦ç±ã€è§†é¢‘ç­‰èµ„æ–™å¯¹æŠ½è±¡å·¥å‚æ¨¡å¼çš„è®²è§£å’Œä»£ç ç¤ºä¾‹ç­‰å†…å®¹ï¼Œä½†æˆ‘å‘ç°ã€‚æŠ½è±¡å·¥å‚çš„æ¦‚å¿µè¢«ä¸€æ¬¡åˆä¸€æ¬¡çš„åˆ·æ–°ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæƒ³è¡¨è¾¾ä¸€ä¸‹è‡ªå·±å¯¹æŠ½è±¡å·¥å‚çš„ç†è§£ã€‚å¦‚æœä½ å’Œæˆ‘æŒä¸åŒçš„æ„è§ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæˆ‘å¾ˆæ„¿æ„å’Œä½ ä¸€èµ·è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚



ã€€ã€€çœ‹æˆ‘è¿‡ä¹‹å‰çš„æ–‡ç« åº”è¯¥çŸ¥é“äº†æˆ‘å†™çš„å·¥å‚æ¨¡å¼çš„æ¦‚å¿µå’Œä»£ç å®ç°ï¼Œä»¥åŠä½¿ç”¨çš„æ—¶æœºã€‚è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å®ç°ï¼Œç­‰äºå·¥å‚æ–¹æ³•æ¨¡å¼çš„å®ç°ã€‚



ã€€ã€€é‚£ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªæ¨¡å¼çš„å®šä¹‰å‡ºç°å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼Œé‚£æˆ‘ä»¬çš„æ¦‚å¿µå°±æ‹æ¸…æ¥šäº†ã€‚æˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¨¡å¼çš„å®šä¹‰ï¼š

1. å·¥å‚ï¼ˆFactoryï¼‰æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºäº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ã€‚
2. æŠ½è±¡å·¥å‚ï¼ˆAbstractFactoryï¼‰æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ã€‚

ã€€ã€€æˆ‘ä»¬å°†ä¸Šé¢çš„ä¸¤ä¸ªæ¨¡å¼çš„å®šä¹‰æ”¾åœ¨ä¸€èµ·æ€»ç»“ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºæ˜¯ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªå·¥å‚æ¥å£ï¼Œç”±å­ç±»å»å®ç°å…·ä½“çš„å·¥å‚ã€‚å¦‚æœæˆ‘æ€»ç»“çš„å®šä¹‰ä½ å¯ä»¥è®¤å¯ï¼Œé‚£ç»§ç»­å¾€ä¸‹çœ‹ã€‚ä¸è®¤å¯å¿ä¸€å¿ï¼Œçœ‹å®Œå†å–·ã€‚è®©æˆ‘ä»¬é€šè¿‡ä»£ç åœ¨ç†è§£ä¸€ä¸‹ã€‚



ã€€ã€€**â—ä¸‹é¢å†…å®¹å¾ˆå…³é”®ï¼Œå¸Œæœ›ä½ èƒ½è®¤çœŸçœ‹å®Œã€‚**å½“ç„¶ï¼Œä¸å»ºè®®æ­»æ‰£å­—çœ¼å’Œä»£ç ï¼Œè¿˜æ˜¯æœ€åˆçš„é‚£ä¸ªèª“è¨€ï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼çš„æ€æƒ³ã€‚è€Œä¸æ˜¯å­¦è¯­æ–‡ã€‚



## ä¸€è¡Œä»£ç  â—



### å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼ªä»£ç 

```java
/**
 * ç”µå­å·¥å‚
 */
public interface ElectronicsFactory {

    /**
     * ç”Ÿäº§ä¸€ä¸ªæ‰‹æœº
     */
    Phone creatPhone();
}
```



```java
/**
 * è‹¹æœæ‰‹æœºç”µå­å·¥å‚
 */
public class IphoneElectronicsFactory implements ElectronicsFactory{

    /**
     * ç”Ÿäº§ä¸€ä¸ªè‹¹æœæ‰‹æœº
     */
    Phone creatPhone() {
        return new IPhone()
    };
}
```



```java
/**
 * å°ç±³æ‰‹æœºç”µå­å·¥å‚
 */
public class MiPhoneElectronicsFactory implements ElectronicsFactory{

    /**
     * ç”Ÿäº§ä¸€ä¸ªè‹¹æœæ‰‹æœº
     */
    Phone creatPhone() {
        return new MiPhone()
    };
}
```



### è®©æˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¼ªä»£ç 

```java
/**
 * ç”µå­å·¥å‚
 */
public interface ElectronicsFactory {

     /**
     * ç”Ÿäº§ä¸€ä¸ªæ‰‹æœº
     */
    Phone creatPhone();
    
     /**
     * ç”Ÿäº§ä¸€ä¸ªç”µè„‘
     */
    Computer creatComputer();
}
```



```java
/**
 * è‹¹æœç”µå­å·¥å‚
 */
public class AppleElectronicsFactory implements ElectronicsFactory{

     /**
     * ç”Ÿäº§ä¸€ä¸ªè‹¹æœæ‰‹æœº
     */
    Phone creatPhone() {
        return new IPhone()
    };
    
     /**
     * ç”Ÿäº§ä¸€ä¸ªè‹¹æœç”µè„‘
     */
    Computer creatComputer() {
        return new MACBook();
    };
}
```



```java
/**
 * å°ç±³ç”µå­å·¥å‚
 */
public class MiElectronicsFactory implements ElectronicsFactory{

     /**
     * ç”Ÿäº§ä¸€ä¸ªå°ç±³æ‰‹æœº
     */
    Phone creatPhone() {
        return new MiPhone()
    };
    
     /**
     * ç”Ÿäº§ä¸€ä¸ªå°ç±³ç”µè„‘
     */
    Computer creatComputer() {
        return new MiComputer();
    };
}
```



æˆ‘ä»¬é€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå¯ä»¥å¾—åˆ°å„ç§å„æ ·çš„åŒç±»å‹äº§å“ï¼ˆéƒ½æ˜¯æ‰‹æœºï¼‰ï¼Œä½†æˆ‘ä»¬å¦‚æœé€šè¿‡æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå°±å¯ä»¥å¾—åˆ°å„ç§å„æ ·åŒä¸ªäº§å“æ—çš„äº§å“ï¼ˆä¸€ä¸ªå“ç‰Œçš„æ‰€æœ‰äº§å“ï¼‰**è€Œè¿™ä¸€åˆ‡çš„å†…å®¹ï¼Œä»…ä»…ç›¸å·®äº†ä¸€è¡Œä»£ç ** ã€‚**åŒæ ·çš„ï¼Œå½“æŠ½è±¡å·¥å‚ä¸­åªæœ‰ä¸€ä¸ªå·¥å‚æ—¶ï¼Œå®ƒä¸å·¥å‚æ¨¡å¼ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚**



![](3-1Q1141559151S.gif)



> å·¥å‚æ–¹æ³•æ¨¡å¼åªè€ƒè™‘ç”Ÿäº§åŒç­‰çº§çš„äº§å“ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼å°†è€ƒè™‘å¤šç­‰çº§äº§å“çš„ç”Ÿäº§ï¼Œå°†åŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼ˆå“ç‰Œï¼‰



å†å›åˆ°ä¸Šé¢çš„ä¸¤ä¸ªå®šä¹‰ï¼š

1. å·¥å‚ï¼ˆFactoryï¼‰æ¨¡å¼ï¼š**å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºäº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ã€‚**
2. æŠ½è±¡å·¥å‚ï¼ˆAbstractFactoryï¼‰æ¨¡å¼ï¼š**æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ã€‚**

æŠ½è±¡å·¥å‚ï¼Œæ¯”å¦‚â€™å¯Œå£«åº·â€˜ï¼Œç»†å“ä¸€ä¸‹ï¼Œä»–å°±æœ‰å¤šä¸ªäº§å“æ—ï¼Œæ­¤æ—¶ä½ åº”è¯¥æ˜ç™½äº†æŠ½è±¡å·¥å‚çš„æ¦‚å¿µå’Œä¸å·¥å‚æ–¹æ³•æ¨¡å¼çš„åŒºåˆ«ï¼ˆç›¸å·®ä¸€è¡Œä»£ç ï¼Œç›¸å·®ä¸€ä¸ªäº§å“æ—ï¼‰ï¼Œå¦‚æœè¢«æˆ‘è¯´æ™•äº†ï¼Œæˆ‘çœŸçš„å¾ˆæŠ±æ­‰ï¼Œæ„¿æ„çš„è¯å¯ä»¥ä¸æˆ‘ç§èŠã€‚



å½“ç„¶ç›¸å·®ä¸€è¡Œä»£ç æ˜¯ä¸ºäº†è¡¨è¾¾ä¸¤è€…ç›´æ¥çš„å…³ç³»ï¼Œåœ¨å®é™…åº”ç”¨æƒ…å†µä¸‹è¿˜æ˜¯éµå¾ªæ ‡å‡†çš„å‘½åè§„èŒƒã€‚é¿å…äº§ç”Ÿæ­§ä¹‰ï¼Œå‡ºç°ç†è§£è¯¯å·®ã€‚



**ğŸ””å¦‚æœè§‰å¾—æˆ‘æ²¡è¯´æ˜ç™½çš„è¯·è”ç³»æˆ‘ï¼Œéå¸¸ä¹æ„è¢«æ‰“æ‰°**

``å¦‚æœä¸Šé¢æ˜Ÿå°˜è¡¨è¿°çš„å†…å®¹æ²¡èƒ½è®²æ¸…æ¥šæŠ½è±¡å·¥å‚çš„æ¦‚å¿µï¼Œå¤§å®¶ä¸è¦æ€¥ã€‚ç»§ç»­å¾€ä¸‹çœ‹ã€‚å¦‚æœæˆ‘è¯´çš„è¿˜ä¸æ˜ç™½ï¼Œç»™æˆ‘ä¸ªæœºä¼šï¼ŒåŠ æˆ‘å¾®ä¿¡ï¼ˆlvgoccï¼‰æˆ–è€…å…¬ä¼—å·å†…ç§èŠï¼Œç›´åˆ°èŠæ¸…æ¥šä¸ºæ­¢ã€‚ä½ è‹¥ä¸ä¼šï¼Œæˆ‘æ„¿å—ç´¯ï¼Œä¸ºäº†ä½ ï¼Œæˆ‘æ„¿æ„æ‰§ç€ğŸ±â€ğŸ’»ã€‚``



### æŠ½è±¡å·¥å‚ç±»å›¾ ğŸ–Œ





### å…·ä½“ä»£ç  ğŸ“„

> å®Œæ•´ä»£ç åŠå•å…ƒæµ‹è¯•ç»“æœ [https://github.com/lvgocc/java-design-patterns/tree/main/abstract-factory](https://github.com/lvgocc/java-design-patterns/tree/main/abstract-factory)





### ä½¿ç”¨æ—¶æœº

- å½“ä½ æƒ³è¦ç®¡ç†ä¸€ç³»åˆ—äº§å“çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸€ä¸ªå¥—é¤ï¼Ÿä¸€ç§ç­–ç•¥ç»„åˆï¼Ÿçœ‹ä½ éœ€æ±‚ï¼Œåˆç†ä½¿ç”¨






### JDKä¸­çš„æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼ç¤ºä¾‹

- javax.xml.parsers.DocumentBuilderFactoryï¼ƒnewInstanceï¼ˆï¼‰
- javax.xml.transform.TransformerFactoryï¼ƒnewInstanceï¼ˆï¼‰
- javax.xml.xpath.XPathFactoryï¼ƒnewInstanceï¼ˆï¼‰